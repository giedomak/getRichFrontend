'use strict'

###*
 # @ngdoc function
 # @name getRichFrontendApp.controller:MainCtrl
 # @description
 # # MainCtrl
 # Controller of the getRichFrontendApp
###
angular.module('getRichFrontendApp')
  .controller 'MainCtrl', ($scope) ->
    $scope.setData = () ->

    input = [[0.03359771963223802, 0.0376312860532947, 0.04339390687794608, 0.03782577788820997, 0.0359872392366991, 0.037699356365101924, 0.03887191346276788, 0.03612800806676917, 0.04168339996088416, 0.03874396969114345, 0.03632780973428463, 0.03593865683679761, 0.04120069429325448, 0.03726251417040181, 0.034229604414740065, 0.039302676956999724, 0.037975141138447306, 0.04070051854524684, 0.038321475045997686, 0.03816456770101316, 0.03811441763736462, 0.04050720576271849, 0.03841630307000448, 0.03803557151644164, 0.03787326993478024, 0.04051411721392645, 0.03951102931734034, 0.04565680785423933, 0.040229842907979825, 0.03765603839544278, 0.03990118307884121], [0.010059025332666713, 0.01027200843829804, 0.011273232521246427, 0.011270925488597754, 0.01191556205449385, 0.011608164125321464, 0.011615994144003447, 0.011024924820028164, 0.010946029207351975, 0.012498646515346275, 0.011428267720810346, 0.01268762622990204, 0.014729562379088706, 0.012859698402351181, 0.01461369728378951, 0.0143468712376559, 0.012212796187641565, 0.011094318358649062, 0.011555460458719101, 0.011193668099874128, 0.011569346297845872, 0.011554760958813411, 0.01272904825013273, 0.012780039121935375, 0.01112472444173593, 0.010642217564708399, 0.010540004679228667, 0.010818991521745975, 0.01159943666015384, 0.01274426132197808, 0.013207076943404188], [0.033681246287455856, 0.0355058578033389, 0.03668451957685485, 0.034814049944535845, 0.0333190184411901, 0.03496256916002998, 0.03607709680814943, 0.032547588623510676, 0.03483278563899458, 0.03478057104402993, 0.03645862247943793, 0.03288831084995285, 0.03462253563843722, 0.03404575937548947, 0.031590734231117, 0.03610532235164405, 0.03551756202602854, 0.03540412956590881, 0.03480402167729398, 0.033200336153330706, 0.03492842467031559, 0.0346278796249, 0.03810303775601571, 0.03743150705343009, 0.03552608517672394, 0.035499243631881734, 0.03765801918788235, 0.03641444059086223, 0.0368711555205363, 0.03641292481622806, 0.03334853272134506], [0.02214437601838612, 0.023409074980095385, 0.02256524381054909, 0.02468535690764407, 0.02303452622885403, 0.022182948189810817, 0.02312945463852163, 0.023459203204939855, 0.026409024632069004, 0.02504440919481264, 0.02472696463235008, 0.020667767940016558, 0.02468637713099769, 0.023488578192825106, 0.02308685020674137, 0.02558276258539117, 0.024513702175909913, 0.02343766811156232, 0.028532769994680456, 0.021494932485672053, 0.020572621357378303, 0.021950017657705337, 0.02703357503003634, 0.02658388597596631, 0.019456383786776967, 0.02190888610744963, 0.02542299501993127, 0.022850065258352703, 0.022040456006273145, 0.023757395876448765, 0.025911079980001014], [0.1962974724918132, 0.17480566804023678, 0.17035107907906819, 0.1808749182809768, 0.17734561983512206, 0.17724448475161256, 0.17135563022737896, 0.1817630532710713, 0.1696298449603427, 0.18243321722982878, 0.1788215131939619, 0.17278565184365446, 0.17541729145606613, 0.176485811391839, 0.1769681139184373, 0.17318944083348148, 0.17481882617846645, 0.177665912064859, 0.17260482998953008, 0.17759014721594443, 0.1815737614859163, 0.16753175627952166, 0.17342144271896168, 0.17496896596440378, 0.16334775702158036, 0.16958164211727558, 0.17585235803342747, 0.17470130330210568, 0.16886662142126677, 0.1731572304219096, 0.16860026845044712], [0.052717625907762126, 0.04669037178743755, 0.047960512452064244, 0.04605098903781652, 0.047247455559569745, 0.04897109872019173, 0.04997536449171489, 0.04804291503696345, 0.04469709438583833, 0.04520038919743286, 0.04790149040722075, 0.048373397926084055, 0.04493966532029771, 0.045338158029648905, 0.04606826339682152, 0.047450897074769384, 0.04646647198626624, 0.044426123018958194, 0.04506518850079885, 0.04313786014019032, 0.042641947314686346, 0.04393745940304382, 0.04438671361476531, 0.049412573350649296, 0.04752131913858536, 0.04568364558217926, 0.04640970974737578, 0.04792200418714735, 0.0470305525500568, 0.047732694845362876, 0.047834491900514774], [0.013122164661337069, 0.01556548070751146, 0.018139643791456554, 0.015490845229286114, 0.015008019737213087, 0.015376717931769687, 0.015560232133016967, 0.014636269657850445, 0.01546647669442684, 0.01515524595472536, 0.016317555043224203, 0.014584860491772112, 0.0156565806663897, 0.01730130275053191, 0.01512996808879002, 0.01636250890449469, 0.017686981614911383, 0.016140115770611543, 0.016207037394261853, 0.013506190699681515, 0.016156541687296692, 0.015450401555139331, 0.015271376030796854, 0.015287488990426054, 0.013250460741657926, 0.016277710507847667, 0.01486925360683054, 0.017251534417054206, 0.016527380518817573, 0.01684747808946912, 0.015325660099098836], [0.017840041453241, 0.01614552405648308, 0.017841256136612124, 0.017902132607679234, 0.015309171855504582, 0.01552183225181753, 0.016349573231170943, 0.017429847512702396, 0.015698006297200598, 0.016339060133510067, 0.01678242800050584, 0.02017314410309363, 0.017619926704136566, 0.017589112908174394, 0.016617936263663168, 0.016440842202076308, 0.016713526042733566, 0.01783498327576625, 0.017030436533627295, 0.01609693232865554, 0.020685327886022103, 0.020568846132016483, 0.019049517482531687, 0.020159346911896, 0.019642302936206824, 0.01624688965502304, 0.016257305815242633, 0.016581401527249528, 0.01669804777387676, 0.01681033197085552, 0.015801788333754185]]

    labels = ['9/13', '9/12', '9/11', '9/10', '9/17', '9/16', '9/15', '9/14', '9/30', '9/19', '9/18', '9/28', '9/29', '9/26', '9/27', '9/24', '9/25', '9/22', '9/23', '9/20', '9/21', '10/1', '9/9', '9/8', '9/7', '9/6', '9/5', '9/4', '9/3', '9/2', '9/1']

    emotions = 'joy,trust,fear,surprise,sadness,disgust,anger,anticipation'.split(',')

    # Chart.js Data
    $scope.data =
      labels: labels
      datasets: []

    for emotion, index in input
      color1 = Math.floor(Math.random()*100+150)
      color2 = Math.floor(Math.random()*100+150)
      color3 = Math.floor(Math.random()*100+150)
      dataset =
        {
          label: emotions[index]
          fillColor: "rgba("+color1+","+color2+","+color3+",0.2)"
          strokeColor: "rgba("+color1+","+color2+","+color3+",1)"
          pointColor: "rgba("+color1+","+color2+","+color3+",1)"
          pointStrokeColor: "#fff"
          pointHighlightFill: "#fff"
          pointHighlightStroke: "rgba("+color1+","+color2+","+color3+",1)"
          data: emotion
        }
      $scope.data.datasets.push dataset


    # Chart.js Options
    $scope.options =
      animation: false
      # Sets the chart to be responsive
      responsive: true

    #/Boolean - Whether grid lines are shown across the chart
      scaleShowGridLines: true

    #String - Colour of the grid lines
      scaleGridLineColor: "rgba(0,0,0,.05)"

    #Number - Width of the grid lines
      scaleGridLineWidth: 1

    #Boolean - Whether the line is curved between points
      bezierCurve: true

    #Number - Tension of the bezier curve between points
      bezierCurveTension: 0.4

    #Boolean - Whether to show a dot for each point
      pointDot: true

    #Number - Radius of each point dot in pixels
      pointDotRadius: 4

    #Number - Pixel width of point dot stroke
      pointDotStrokeWidth: 1

    #Number - amount extra to add to the radius to cater for hit detection outside the drawn point
      pointHitDetectionRadius: 20

    #Boolean - Whether to show a stroke for datasets
      datasetStroke: true

    #Number - Pixel width of dataset stroke
      datasetStrokeWidth: 2

    #Boolean - Whether to fill the dataset with a colour
      datasetFill: true

    # Function - on animation progress
      onAnimationProgress: ->


        # Function - on animation complete
      onAnimationComplete: ->

        #String - A legend template
      legendTemplate: `'<ul class="tc-chart-js-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'`
